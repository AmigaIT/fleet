{% extends 'main/sidenav.html' %}
{% load static %}
{% block content1 %}
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map12 {
      width:100%;
        height: 80%;
      }

      .controls {
        margin-top: 10px;
        border: 1px solid transparent;
        border-radius: 2px 0 0 2px;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        height: 32px;
        outline: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
      }

      #origin-input,
      #destination-input {
        background-color: #fff;
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
        margin-left: 12px;
        padding: 0 11px 0 13px;
        text-overflow: ellipsis;
        width: 200px;
      }

      #origin-input:focus,
      #destination-input:focus {
        border-color: #4d90fe;
      }

      #vno {
        color: #000;

        margin-left: 12px;
        padding: 5px 11px 0px 11px;
      }

      #mode-selector label {
        font-family: Roboto;
        font-size: 13px;
        font-weight: 300;
      }
	  .vehno{display: list-item;}

    </style>
	<script>
	function search() { 

    var input = document.getElementById('vno').value;
    input=input.toLowerCase(); 
    var  x = document.getElementsByClassName('vehno'); 
    for (i = 0; i < x.length; i++) {  
        if (!x[i].innerHTML.toLowerCase().includes(input)) { 
            x[i].style.display="none"; 
        } 
        else {x
            x[i].style.display="list-item";                  
        } 
    } 
}
	</script>

    <div style="display: none">
        <form  method="post" >
        <input id="origin-input" class="controls" type="text"
            placeholder="Enter an origin location">

        <input id="destination-input" class="controls" type="text"
            placeholder="Enter a destination location">
<input id="vno" onkeyup="search()" type="text" class="controls"
        name="search" placeholder="Search Vehicle No..">
         <ol id='list'> 
        <li class="vehno">TNH1200</li> </ol>
            <input type="submit" class="btn btn-primary controls" id="sub" style="margin-left:10px;font-size:16px;">
            </form>
    </div>

    <div id="map12"></div>
    <script>


function initMap() {

  var map = new google.maps.Map(document.getElementById('map12'), {
    mapTypeControl: false,
   zoom: 4,
center: {lat: 22.9734, lng: 78.6569},
  });

  new AutocompleteDirectionsHandler(map);
}

function AutocompleteDirectionsHandler(map) {
  this.map = map;
  this.originPlaceId = null;
  this.destinationPlaceId = null;
  this.travelMode = 'WALKING';
  this.directionsService = new google.maps.DirectionsService;
  this.directionsRenderer = new google.maps.DirectionsRenderer;
  this.directionsRenderer.setMap(map);

  var originInput = document.getElementById('origin-input');
  var destinationInput = document.getElementById('destination-input');
  var vno = document.getElementById('vno');

  var originAutocomplete = new google.maps.places.Autocomplete(originInput);
  // Specify just the place data fields that you need.
  originAutocomplete.setFields(['place_id']);


  var destinationAutocomplete =
      new google.maps.places.Autocomplete(destinationInput);
  // Specify just the place data fields that you need.
  destinationAutocomplete.setFields(['place_id']);

  
 

  this.setupPlaceChangedListener(originAutocomplete, 'ORIG');
  this.setupPlaceChangedListener(destinationAutocomplete, 'DEST');

  this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(originInput);
  this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(
      destinationInput);
  this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(vno);
    this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(sub);
}


AutocompleteDirectionsHandler.prototype.setupPlaceChangedListener = function(
    autocomplete, mode) {
  var me = this;

 
  autocomplete.bindTo('bounds', this.map);

  autocomplete.addListener('place_changed', function() {
    var place = autocomplete.getPlace();

    if (!place.place_id) {
      return;
    }
    if (mode === 'ORIG') {
      me.originPlaceId = place.place_id;
    } else {
      me.destinationPlaceId = place.place_id;
    }
    me.route();
  });
};

AutocompleteDirectionsHandler.prototype.route = function() {
  if (!this.originPlaceId || !this.destinationPlaceId) {
    return;
  }
  var me = this;

  this.directionsService.route(
      {
        origin: {'placeId': this.originPlaceId},
        destination: {'placeId': this.destinationPlaceId},
        travelMode: this.travelMode
      },
      function(response, status) {
        if (status === 'OK') {
          me.directionsRenderer.setDirections(response);
        } else {
          window.alert('Directions request failed due to ' + status);
        }
      });
};

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDmXhcX8z4d4GxPxIiklwNvtqxcjZoWsWU&libraries&libraries=places&callback=initMap"
        async defer></script>
<div class="container-fluid">
    <div class="row">
        <table class=" table table-striped table-dark table-bordered">
            <tr>
                <th>S.NO</th>
                <th>Start</th>
                <th>Stop</th>

                <th>Vehicle No</th>
                <th>Current Location</th>
                <th>Distance</th>
                <th>Duration</th>

                <th>Complete/Incomplete</th>
            </tr>
            <tr><td>1</td><td>Chennai</td><td>Mumbai</td><td>TNH1500</td><td>Bangalore</td><td>1,336.8 km</td><td>28/09/2019-24HRS</td><td><input type="checkbox"></td></tr>
        </table>
    </div>
</div>
{% endblock %}