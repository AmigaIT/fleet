{% extends 'main/sidenav.html' %}
{% load static from staticfiles %}
{% block content1 %}

<script>
var latt,long,locations,response;
function myMap()
{
var url="{% static 'js/track.json' %}";
var map = new google.maps.Map(document.getElementById("googleMap"),{

center:new google.maps.LatLng(13.073100090026855,80.28230285644531),
zoom:4,});
var AJAX_req = new XMLHttpRequest();
AJAX_req.open( "GET",url, true );
AJAX_req.setRequestHeader("Content-type", "application/json");
AJAX_req.send();
var marker, j, i=0;
var infowindow = new google.maps.InfoWindow();
AJAX_req.onreadystatechange = function()
{
if( AJAX_req.readyState == 4 && AJAX_req.status == 200 )
{
response = JSON.parse( AJAX_req.responseText );

for(j in response.assetHistory){

marker = new google.maps.Marker({
position: new google.maps.LatLng(response.assetHistory[j].latitude,response.assetHistory[j].longitude),
map: map
});
google.maps.event.addListener(marker, 'click', (function(marker) {
return function() {
infowindow.open(map, marker);
}
})(marker));
}
}
 else if(AJAX_req.readyState == 0 || AJAX_req.status == 0) {
              return;}

}


}
</script>
<div id="googleMap" style="width:99%;height:900px;"></div>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDmXhcX8z4d4GxPxIiklwNvtqxcjZoWsWU&callback=myMap"></script>

{% endblock content1 %}